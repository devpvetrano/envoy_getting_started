{"addrs":[":8181"],"diagnostic-addrs":[],"insecure_addr":"","level":"info","msg":"Initializing server.","time":"2020-08-20T13:16:19Z"}
{"level":"info","msg":"Starting decision logger.","plugin":"decision_logs","time":"2020-08-20T13:16:19Z"}
{"addr":":9191","dry-run":false,"enable-reflection":false,"level":"info","msg":"Starting gRPC server.","path":"envoy/authz/allow","query":"","time":"2020-08-20T13:16:19Z"}
{"headers":{"Content-Type":["application/json"],"User-Agent":["Open Policy Agent/0.23.0-envoy (linux, amd64)"]},"level":"debug","method":"POST","msg":"Sending request.","time":"2020-08-20T13:16:19Z","url":"https://telemetry.openpolicyagent.org/v1/version"}
{"level":"debug","msg":"Server initialized.","time":"2020-08-20T13:16:19Z"}
{"headers":{"Connection":["keep-alive"],"Content-Length":["194"],"Content-Type":["application/json"],"Date":["Thu, 20 Aug 2020 13:16:20 GMT"]},"level":"debug","method":"POST","msg":"Received response.","status":"200 OK","time":"2020-08-20T13:16:20Z","url":"https://telemetry.openpolicyagent.org/v1/version"}
{"current_version":"0.23.0-envoy","download_opa":"https://openpolicyagent.org/downloads/v0.23.0/opa_linux_amd64","latest_version":"0.23.0","level":"info","msg":"OPA is out of date.","release_notes":"https://github.com/open-policy-agent/opa/releases/tag/v0.23.0","time":"2020-08-20T13:16:20Z"}
{"dry-run":false,"input":[[{"type":"string","value":"parsed_path"},{"type":"array","value":[{"type":"string","value":"anything"}]}],[{"type":"string","value":"parsed_query"},{"type":"object","value":[]}],[{"type":"string","value":"parsed_body"},{"type":"null","value":{}}],[{"type":"string","value":"truncated_body"},{"type":"boolean","value":false}],[{"type":"string","value":"attributes"},{"type":"object","value":[[{"type":"string","value":"source"},{"type":"object","value":[[{"type":"string","value":"address"},{"type":"object","value":[[{"type":"string","value":"Address"},{"type":"object","value":[[{"type":"string","value":"SocketAddress"},{"type":"object","value":[[{"type":"string","value":"address"},{"type":"string","value":"192.168.240.1"}],[{"type":"string","value":"PortSpecifier"},{"type":"object","value":[[{"type":"string","value":"PortValue"},{"type":"number","value":37056}]]}]]}]]}]]}]]}],[{"type":"string","value":"destination"},{"type":"object","value":[[{"type":"string","value":"address"},{"type":"object","value":[[{"type":"string","value":"Address"},{"type":"object","value":[[{"type":"string","value":"SocketAddress"},{"type":"object","value":[[{"type":"string","value":"address"},{"type":"string","value":"192.168.240.4"}],[{"type":"string","value":"PortSpecifier"},{"type":"object","value":[[{"type":"string","value":"PortValue"},{"type":"number","value":80}]]}]]}]]}]]}]]}],[{"type":"string","value":"request"},{"type":"object","value":[[{"type":"string","value":"time"},{"type":"object","value":[[{"type":"string","value":"seconds"},{"type":"number","value":1597929383}],[{"type":"string","value":"nanos"},{"type":"number","value":167304000}]]}],[{"type":"string","value":"http"},{"type":"object","value":[[{"type":"string","value":"host"},{"type":"string","value":"localhost:8080"}],[{"type":"string","value":"protocol"},{"type":"string","value":"HTTP/1.1"}],[{"type":"string","value":"id"},{"type":"string","value":"9041492607792845145"}],[{"type":"string","value":"method"},{"type":"string","value":"GET"}],[{"type":"string","value":"headers"},{"type":"object","value":[[{"type":"string","value":"actor-token"},{"type":"string","value":"www"}],[{"type":"string","value":"user-agent"},{"type":"string","value":"curl/7.61.0"}],[{"type":"string","value":"subject-token"},{"type":"string","value":"www"}],[{"type":"string","value":"x-forwarded-proto"},{"type":"string","value":"http"}],[{"type":"string","value":"x-request-id"},{"type":"string","value":"1bffbdd4-485b-4b16-96e2-e219b4251eaa"}],[{"type":"string","value":":authority"},{"type":"string","value":"localhost:8080"}],[{"type":"string","value":":method"},{"type":"string","value":"GET"}],[{"type":"string","value":":path"},{"type":"string","value":"/anything"}],[{"type":"string","value":"accept"},{"type":"string","value":"*/*"}],[{"type":"string","value":"app-token"},{"type":"string","value":"www"}]]}],[{"type":"string","value":"path"},{"type":"string","value":"/anything"}]]}]]}],[{"type":"string","value":"metadata_context"},{"type":"object","value":[]}]]}]],"level":"debug","msg":"Executing policy query.","query":"data.envoy.authz.allow","time":"2020-08-20T13:16:23Z","txn":3}
{"decision_id":"5d6c36e4-ac23-4fdd-a924-7dc43a7166fe","error":{"code":"eval_builtin_error","location":{"col":5,"file":"/config/policy.rego","row":72},"message":"io.jwt.verify_es256: encoded JWT had no period separators"},"input":{"attributes":{"destination":{"address":{"Address":{"SocketAddress":{"PortSpecifier":{"PortValue":80},"address":"192.168.240.4"}}}},"metadata_context":{},"request":{"http":{"headers":{":authority":"localhost:8080",":method":"GET",":path":"/anything","accept":"*/*","actor-token":"www","app-token":"www","subject-token":"www","user-agent":"curl/7.61.0","x-forwarded-proto":"http","x-request-id":"1bffbdd4-485b-4b16-96e2-e219b4251eaa"},"host":"localhost:8080","id":"9041492607792845145","method":"GET","path":"/anything","protocol":"HTTP/1.1"},"time":{"nanos":167304000,"seconds":1597929383}},"source":{"address":{"Address":{"SocketAddress":{"PortSpecifier":{"PortValue":37056},"address":"192.168.240.1"}}}}},"parsed_body":null,"parsed_path":["anything"],"parsed_query":{},"truncated_body":false},"labels":{"id":"acd1835c-4ed4-4ca3-b71e-2667943fdd3b","version":"0.23.0-envoy"},"level":"info","metrics":{"timer_rego_query_compile_ns":89400,"timer_rego_query_eval_ns":85100,"timer_server_handler_ns":1259000},"msg":"Decision Log","path":"envoy/authz/allow","requested_by":"","time":"2020-08-20T13:16:23Z","timestamp":"2020-08-20T13:16:23.174572Z","type":"openpolicyagent.org/decision_logs"}
